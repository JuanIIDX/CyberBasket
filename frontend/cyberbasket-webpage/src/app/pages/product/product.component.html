<main id="main" class="main">






   <section class="section dashboard">
      <div class="row" *ngIf="!descargand_datos_servidor; else pantalla_carga">
         <div class="col-lg-8">
            <div class="row">

               <div class="col-12">
                  <div class="card">

                     <div class="card-body">
                        <div class="ps-3">
                           <br>
                           <h2>{{nombre_producto}}</h2>
                           <h5 class="text-muted  ps-1">{{nombre_tienda}}</h5>


                           <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                              <div class="carousel-indicators"> 
                              <!-------------------Parte que ordena los botones de las imagenes-------------->
                              <button *ngIf="lista_imagenes[0] !== ''" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button> 
                              <button *ngIf="lista_imagenes[1] !== ''" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button> 
                              <button *ngIf="lista_imagenes[2] !== ''" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
                              <button *ngIf="lista_imagenes[3] !== ''" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3" aria-label="Slide 4"></button> 
                              <button *ngIf="lista_imagenes[4] !== ''" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="4" aria-label="Slide 5"></button>
                          </div>
                              <!-------------------Parte que ordena los sliders-------------->
                              <div class="carousel-inner">
                                 <div *ngIf="lista_imagenes[0] !== ''" class="carousel-item active"> <img src="{{lista_imagenes[0]}}" class="d-block w-100" alt="..."></div>
                                 <div *ngIf="lista_imagenes[1] !== ''"  class="carousel-item"> <img src="{{lista_imagenes[1]}}" class="d-block w-100" alt="..."></div>
                                 <div *ngIf="lista_imagenes[2] !== ''"  class="carousel-item"> <img src="{{lista_imagenes[2]}}" class="d-block w-100" alt="..."></div>
                                 <div *ngIf="lista_imagenes[3] !== ''"  class="carousel-item"> <img src="{{lista_imagenes[3]}}" class="d-block w-100" alt="..."></div>
                                 <div *ngIf="lista_imagenes[4] !== ''"  class="carousel-item"> <img src="{{lista_imagenes[4]}}" class="d-block w-100" alt="..."></div>
                              </div>
                              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev"> <span class="carousel-control-prev-icon" aria-hidden="true"></span> <span class="visually-hidden">Previous</span> </button> <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next"> <span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="visually-hidden">Next</span> </button>
                           </div>
                           <div class="card-body">
                              <h5 class="card-title">Descripcion</h5>
                              {{descripcion_producto}}
                           </div>


                        </div>
                        <div id="reportsChart"></div>
                     </div>
                  </div>
               </div>

            </div>
         </div>

         <div class="col-lg-4">
            <div class="card text-right">

               <div class="card-body">

                  <div class="col-md-12">
                     <div class="row">
                       <div class="col-md-8" >
                           <h5 class="card-title">Precio</h5>
                           <h1>{{precio_producto }}</h1>                           
                           <h5>+envio {{precio_envio }}</h5>
                        </div>
                        <div class="col-md-4" >
                           <h5 class="card-title">Cantidad</h5>
                           <input type="number" class="form-control" min="1" value="1" [(ngModel)]="stock_seleccion">
                           <h5> {{stock_producto }} und.</h5>

                        </div>
                     </div>
                  </div>

                  <div *ngIf="activeUser.email else loggedOut"> 

                  <div class="d-grid gap-2 mt-3">
                     <button class="btn btn-primary" type="button" (click)="crear_objeto_carrito_compra()" [disabled]='cargando_datos_servidor'> 
                        <div *ngIf="!cargando_datos_servidor; else activo_boton1">
                           Agregar al carrito
                        </div>
                        <ng-template #activo_boton1>
                           <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span> Agregando al carrito...
                        </ng-template>
                     </button> 
                  </div>




                  </div>

                  <ng-template #loggedOut>
                        Debes iniciar sesion para realizar esta compra

                   </ng-template>



               </div>
            </div>



         </div>
      </div>
   </section>

   <ng-template #pantalla_carga>
      
      <div style="position: absolute;margin: auto;top: 0; right: 0; bottom: 0; left: 0; width: 420px;  height: 80px;">
         <div class="spinner-grow text-primary" style="width: 70px; height: 70px;  margin: 20px;" role="status"> <span class="visually-hidden">Loading...</span></div>
         <div class="spinner-grow text-primary" style="width: 70px; height: 70px; margin: 20px;" role="status"> <span class="visually-hidden">Loading...</span></div>
         <div class="spinner-grow text-primary" style="width: 70px; height: 70px; margin: 20px;" role="status"> <span class="visually-hidden">Loading...</span></div>
      </div>
      </ng-template>


</main>